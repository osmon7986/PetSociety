<div class="container">
  <div class="container">

    <header class="page-header">
      <h1>建立新活動</h1>
      <p class="description">填寫下列表單以建立新的活動頁面。</p>
    </header>

    <main class="content-card">

      <section class="cover-photo-section">
      </section>

      <form [formGroup]="activityForm" class="organizer-form" (ngSubmit)="onSubmit()">

        <fieldset class="form-section">
          <h3 class="section-title">活動基本資訊</h3>

          <div class="form-group">
            <label for="title" class="required">活動標題</label>
            <input id="title" type="text" class="form-control" formControlName="title" placeholder="請輸入活動名稱">

            @if (activityForm.get('title')?.touched && activityForm.get('title')?.invalid) {
            <small class="text-danger mt-1 d-block">
              <i class="fa-solid fa-circle-exclamation me-1"></i> 標題為必填項目
            </small>
            }
          </div>
          <div class="form-group">
            <label for="organizerName" class="required">活動承辦單位</label>
            <input id="organizerName" type="text" class="form-control" formControlName="organizerName"
              placeholder="請輸入承辦單位名稱">

            @if (activityForm.get('organizerName')?.touched && activityForm.get('organizerName')?.invalid) {
            <small class="text-danger mt-1 d-block">
              <i class="fa-solid fa-circle-exclamation me-1"></i> 活動承辦單位名稱為必填項目
            </small>
            }
          </div>

          <div class="form-group">
            <label for="desc">活動描述</label>
            <textarea id="desc" class="form-control" formControlName="description" rows="4"
              placeholder="請詳細說明活動內容..."></textarea>
          </div>
        </fieldset>

        <fieldset class="form-section">
          <h3 class="section-title">活動時間</h3>

          <div class="form-group-row">
            <div class="form-group half">
              <label>開始時間</label>
              <input type="datetime-local" class="form-control" formControlName="startTime">
            </div>
            <div class="form-group half">
              <label>結束時間</label>
              <input type="datetime-local" class="form-control" formControlName="endTime">
            </div>
          </div>
        </fieldset>

        <fieldset class="form-section">
          <h3 class="section-title">活動細節</h3>

          <div class="col-md-7">
            <div class="form-group">
              <label>人數上限</label>
              <input type="number" class="form-control" formControlName="maxCapacity" placeholder="請輸入人數">
            </div>
          </div>
          <!-- todo:調整位置 -->
          <div class="col-md-5">
            <div class="map-container">
              <app-activity-map [showInfoWindow]="false" [showSearch]="true"
                (locationPicked)="onLocationSelected($event)"></app-activity-map>
            </div>
          </div>

        </fieldset>

        <fieldset class="form-section">
          <h3 class="section-title">報名時間設定</h3>

          <div class="form-group-row">
            <div class="form-group half">
              <label>報名開始</label>
              <input type="datetime-local" class="form-control" formControlName="registrationStartTime">
            </div>
            <div class="form-group half">
              <label>報名截止</label>
              <input type="datetime-local" class="form-control" formControlName="registrationEndTime">
            </div>
          </div>
        </fieldset>

        <fieldset class="form-section">
          <h3 class="section-title">活動詳情</h3>
          <div class="editor-container border rounded p-2">
            <app-editor [htmlContent]="parentHtmlContent"
              (onContentChange)="onReceiveEditorContent($event)"></app-editor>
          </div>
        </fieldset>

        <div class="form-actions d-flex justify-content-end gap-2 mt-4 pt-3 border-top">
          <button type="button" class="btn btn-secondary" (click)="example()">填入範例</button>
          <button type="button" class="btn btn-outline-dark" (click)="back()">取消</button>
          <button type="submit" class="btn-create-organizer" style="width: auto; padding: 10px 30px;"
            [disabled]="activityForm.invalid">建立活動</button>
        </div>

      </form>
    </main>
  </div>